<!doctype html>
<html lang="fr">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Admin Radio 24/7</title>
<style>
body{font-family:sans-serif;background:#0f1724;color:white;padding:20px}
h1{color:#7c3aed}
ul{list-style:none;padding:0}
li{margin:8px 0}
button{padding:6px 12px;background:#7c3aed;border:none;color:white;border-radius:6px;cursor:pointer}
</style>
</head>
<body>
<h1>Admin Radio 24/7</h1>
<ul id="tracks">Chargement…</ul>

<script>
// mot de passe simple
const PASSWORD = "monmotdepasse"; // change-le
const userInput = prompt("Mot de passe admin :");
if(userInput !== PASSWORD){
    alert("Mot de passe incorrect !");
    document.body.innerHTML = "<h2>Accès refusé</h2>";
    throw "Accès refusé";
}

let forcedTrack = null; // URL du morceau forcé

async function loadList(){
    const r = await fetch('list.json');
    const data = await r.json();
    const ul = document.getElementById('tracks');
    ul.innerHTML = '';
    data.forEach((p)=>{
        const li = document.createElement('li');
        li.textContent = p.titre + " — " + p.artiste;
        const btn = document.createElement('button');
        btn.textContent = "Forcer";
        btn.onclick = ()=>{
            forcedTrack = p.url;
            alert("Musique forcée : " + p.titre);
            // envoi un événement à la page index si elle est ouverte dans un autre onglet
            localStorage.setItem("forcedTrack", p.url + "|" + Date.now());
        };
        li.appendChild(btn);
        ul.appendChild(li);
    });
}

loadList();
</script>
</body>
</html>
